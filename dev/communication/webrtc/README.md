いい質問です！
さっきのコードと説明の中の「要」になっている3つのポイントを整理するとこうなります👇

---

### 1. データチャンネルを作成する理由

* **音声・映像だけでなく、任意のデータ（文字列・JSON・バイナリなど）を送るため**です。
  WebRTCには大きく2種類のチャネルがあります：

  * **メディアストリーム**（音声や映像）
  * **データチャンネル**（任意のデータ）
* たとえばビデオ通話だけなら音声・映像のストリームを流せばいいですが、\*\*チャット・ファイル転送・ゲーム同期など「テキストやバイナリ」\*\*を送りたいときに「データチャンネル」を使います。
* データチャンネルは内部的には **SCTP over DTLS over UDP** で動いていて、順序制御・再送制御・暗号化などを全部やってくれるので、**UDPの速さ＋TCPの信頼性を両立**できます。

---

### 2. シグナリングでは、何をしている？

* シグナリングとは、**接続前に「お互いの連絡先・使う条件」を交換する手続き**です。
* WebRTCの「接続条件」は、**SDP (Session Description Protocol)** というテキストにまとめられています。

  * どんなコーデック（音声・映像・データ）を使うか
  * どんなIP・ポートで待っているか
  * セキュリティ鍵情報 など
* これを `createOffer` / `createAnswer` で作り、`setLocalDescription` / `setRemoteDescription` で設定します。
* **ブラウザ同士は直接通信できないので、最初だけWebSocketやHTTP経由でSDPを相手に渡す**（これがシグナリングサーバーの役割）必要があります。
* つまり、シグナリングは「この条件で通信しようね」という取り決め・名刺交換のようなものです。

---

### 3. ICE候補の交換とは？

* インターネットは、家庭・会社・携帯回線などで**NAT（アドレス変換）やファイアウォール**を通っていることが多く、直接相手のIP:ポートにアクセスできない場合がほとんどです。
* そこでWebRTCは、**ICE (Interactive Connectivity Establishment)** という仕組みを使って、「どの経路で相手と繋がれるか」を自動で探します。
* 具体的には：

  1. **STUNサーバー**にアクセスして、自分が外から見えるグローバルIP・ポートを取得（候補1）。
  2. **ローカルIP**（LAN内でのIP）も候補にする（候補2）。
  3. **TURNサーバー**（中継サーバー）経由の候補も作る（候補3）。
  4. これらの「候補（Candidate）」を`onicecandidate`イベントで相手に送り、相手は`addIceCandidate`で登録。
* 双方が候補を出し合うことで、最適な経路（P2Pが可能なら直接、無理ならTURN経由）が自動選択されます。
* これが「ICE候補の交換」です。

---

### まとめイメージ

* **データチャンネル**＝「P2Pで好きなデータをやり取りするための線」
* **シグナリング**＝「その線をどう繋ぐかの条件（住所・ポート・暗号化鍵など）の交換」
* **ICE候補の交換**＝「どの経路（ローカルIP/グローバルIP/TURN）で繋ぐかの候補を交換」

この3つをセットで理解すると、WebRTCが「ブラウザ間でUDPの速さとTCP並みの信頼性を確保しつつ、NAT越えまで自動でやってくれる仕組み」だというのが見えてきます。
